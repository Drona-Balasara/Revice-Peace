<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman Performance Dashboard - Revive Peace</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>üìä Hangman Performance Dashboard</h1>
            <p>Track your progress and improve your vocabulary skills</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalGames">0</div>
                <div class="stat-label">Total Games</div>
                <div class="stat-change positive" id="gamesChange">+0 this week</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="winRate">0%</div>
                <div class="stat-label">Win Rate</div>
                <div class="stat-change positive" id="winRateChange">+0% this week</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgScore">0</div>
                <div class="stat-label">Average Score</div>
                <div class="stat-change positive" id="scoreChange">+0 this week</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="bestScore">0</div>
                <div class="stat-label">Best Score</div>
                <div class="stat-change" id="bestScoreDate">-</div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">Performance Over Time</div>
                <div class="performance-chart" id="performanceChart">
                    <!-- Chart bars will be generated by JavaScript -->
                </div>
                <div class="chart-labels">
                    <span>7 days ago</span>
                    <span>6 days ago</span>
                    <span>5 days ago</span>
                    <span>4 days ago</span>
                    <span>3 days ago</span>
                    <span>2 days ago</span>
                    <span>Yesterday</span>
                    <span>Today</span>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Difficulty Performance</div>
                <div class="difficulty-breakdown">
                    <div class="difficulty-card easy">
                        <div class="difficulty-title">Easy Level</div>
                        <div class="difficulty-stats">
                            <div>Games: <span id="easyGames">0</span></div>
                            <div>Win Rate: <span id="easyWinRate">0%</span></div>
                            <div>Avg Score: <span id="easyAvgScore">0</span></div>
                        </div>
                    </div>
                    <div class="difficulty-card medium">
                        <div class="difficulty-title">Medium Level</div>
                        <div class="difficulty-stats">
                            <div>Games: <span id="mediumGames">0</span></div>
                            <div>Win Rate: <span id="mediumWinRate">0%</span></div>
                            <div>Avg Score: <span id="mediumAvgScore">0</span></div>
                        </div>
                    </div>
                    <div class="difficulty-card hard">
                        <div class="difficulty-title">Hard Level</div>
                        <div class="difficulty-stats">
                            <div>Games: <span id="hardGames">0</span></div>
                            <div>Win Rate: <span id="hardWinRate">0%</span></div>
                            <div>Avg Score: <span id="hardAvgScore">0</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="recent-games">
            <div class="game-history">
                <div class="chart-title">Recent Games</div>
                <div id="gameHistory">
                    <!-- Game history items will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="insights-section">
            <div class="insight-card">
                <div class="insight-title">üéØ Performance Insights</div>
                <div class="insight-text" id="performanceInsight">
                    Start playing to see your performance insights!
                </div>
            </div>
            <div class="insight-card">
                <div class="insight-title">üí° Improvement Tips</div>
                <div class="insight-text" id="improvementTips">
                    ‚Ä¢ Try different difficulty levels to challenge yourself<br>
                    ‚Ä¢ Use hints strategically to improve your score<br>
                    ‚Ä¢ Practice regularly to build your vocabulary<br>
                    ‚Ä¢ Focus on common letter patterns in words
                </div>
            </div>
        </div>

        <div class="controls">
            <button onclick="window.location.href='hangman.html'">üéØ Play Hangman</button>
            <button onclick="window.location.href='games.html'">‚Üê Back to Games</button>
            <button class="reset-btn" onclick="resetStats()">üóëÔ∏è Reset Stats</button>
        </div>
    </div>

    <script>
        // Game statistics storage
        let gameStats = JSON.parse(localStorage.getItem('hangmanStats')) || {
            totalGames: 0,
            totalWins: 0,
            totalScore: 0,
            bestScore: 0,
            bestScoreDate: null,
            games: [],
            difficultyStats: {
                easy: { games: 0, wins: 0, totalScore: 0 },
                medium: { games: 0, wins: 0, totalScore: 0 },
                hard: { games: 0, wins: 0, totalScore: 0 }
            }
        };

        // Initialize dashboard
        function initDashboard() {
            updateStats();
            updatePerformanceChart();
            updateDifficultyBreakdown();
            updateGameHistory();
            updateInsights();
        }

        // Update main statistics
        function updateStats() {
            const winRate = gameStats.totalGames > 0 ? Math.round((gameStats.totalWins / gameStats.totalGames) * 100) : 0;
            const avgScore = gameStats.totalGames > 0 ? Math.round(gameStats.totalScore / gameStats.totalGames) : 0;

            document.getElementById('totalGames').textContent = gameStats.totalGames;
            document.getElementById('winRate').textContent = winRate + '%';
            document.getElementById('avgScore').textContent = avgScore;
            document.getElementById('bestScore').textContent = gameStats.bestScore;

            if (gameStats.bestScoreDate) {
                document.getElementById('bestScoreDate').textContent = new Date(gameStats.bestScoreDate).toLocaleDateString();
            }

            // Calculate weekly changes
            const weekAgo = new Date();
            weekAgo.setDate(weekAgo.getDate() - 7);
            const recentGames = gameStats.games.filter(game => new Date(game.date) > weekAgo);
            
            const recentWins = recentGames.filter(game => game.won).length;
            const recentWinRate = recentGames.length > 0 ? Math.round((recentWins / recentGames.length) * 100) : 0;
            const recentAvgScore = recentGames.length > 0 ? Math.round(recentGames.reduce((sum, game) => sum + game.score, 0) / recentGames.length) : 0;

            document.getElementById('gamesChange').textContent = `+${recentGames.length} this week`;
            document.getElementById('winRateChange').textContent = `+${recentWinRate - winRate}% this week`;
            document.getElementById('scoreChange').textContent = `+${recentAvgScore - avgScore} this week`;
        }

        // Update performance chart
        function updatePerformanceChart() {
            const chart = document.getElementById('performanceChart');
            chart.innerHTML = '';

            const last8Days = [];
            for (let i = 7; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                last8Days.push(date.toDateString());
            }

            const dailyScores = last8Days.map(date => {
                const dayGames = gameStats.games.filter(game => 
                    new Date(game.date).toDateString() === date
                );
                return dayGames.length > 0 ? 
                    Math.round(dayGames.reduce((sum, game) => sum + game.score, 0) / dayGames.length) : 0;
            });

            const maxScore = Math.max(...dailyScores, 100);
            const barWidth = (chart.offsetWidth - 80) / 8;

            dailyScores.forEach((score, index) => {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.left = `${20 + index * barWidth}px`;
                bar.style.width = `${barWidth - 10}px`;
                bar.style.height = `${(score / maxScore) * 250}px`;
                bar.textContent = score;
                chart.appendChild(bar);
            });
        }

        // Update difficulty breakdown
        function updateDifficultyBreakdown() {
            const difficulties = ['easy', 'medium', 'hard'];
            
            difficulties.forEach(difficulty => {
                const stats = gameStats.difficultyStats[difficulty];
                const winRate = stats.games > 0 ? Math.round((stats.wins / stats.games) * 100) : 0;
                const avgScore = stats.games > 0 ? Math.round(stats.totalScore / stats.games) : 0;

                document.getElementById(`${difficulty}Games`).textContent = stats.games;
                document.getElementById(`${difficulty}WinRate`).textContent = winRate + '%';
                document.getElementById(`${difficulty}AvgScore`).textContent = avgScore;
            });
        }

        // Update game history
        function updateGameHistory() {
            const historyContainer = document.getElementById('gameHistory');
            const recentGames = gameStats.games.slice(-10).reverse();

            if (recentGames.length === 0) {
                historyContainer.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No games played yet. Start playing to see your history!</div>';
                return;
            }

            historyContainer.innerHTML = recentGames.map(game => `
                <div class="history-item">
                    <div class="game-info">
                        <span class="game-result ${game.won ? 'win' : 'lose'}">${game.won ? 'WIN' : 'LOSE'}</span>
                        <span><strong>${game.word}</strong> (${game.difficulty})</span>
                    </div>
                    <div>
                        <span>Score: ${game.score}</span>
                        <span style="margin-left: 15px; color: #666;">${new Date(game.date).toLocaleDateString()}</span>
                    </div>
                </div>
            `).join('');
        }

        // Update insights
        function updateInsights() {
            const insightElement = document.getElementById('performanceInsight');
            
            if (gameStats.totalGames === 0) {
                insightElement.innerHTML = 'Start playing to see your performance insights!';
                return;
            }

            const winRate = Math.round((gameStats.totalWins / gameStats.totalGames) * 100);
            const avgScore = Math.round(gameStats.totalScore / gameStats.totalGames);
            
            let insight = '';
            
            if (winRate >= 80) {
                insight = `Excellent performance! You're winning ${winRate}% of your games with an average score of ${avgScore}. You're a hangman master! üèÜ`;
            } else if (winRate >= 60) {
                insight = `Great job! You're winning ${winRate}% of your games with an average score of ${avgScore}. Keep up the good work! üëç`;
            } else if (winRate >= 40) {
                insight = `Good progress! You're winning ${winRate}% of your games with an average score of ${avgScore}. Try using hints more strategically! üí°`;
            } else {
                insight = `Keep practicing! You're winning ${winRate}% of your games with an average score of ${avgScore}. Try starting with easier words to build confidence! üå±`;
            }

            insightElement.innerHTML = insight;
        }

        // Reset statistics
        function resetStats() {
            if (confirm('Are you sure you want to reset all your hangman statistics? This cannot be undone.')) {
                gameStats = {
                    totalGames: 0,
                    totalWins: 0,
                    totalScore: 0,
                    bestScore: 0,
                    bestScoreDate: null,
                    games: [],
                    difficultyStats: {
                        easy: { games: 0, wins: 0, totalScore: 0 },
                        medium: { games: 0, wins: 0, totalScore: 0 },
                        hard: { games: 0, wins: 0, totalScore: 0 }
                    }
                };
                localStorage.setItem('hangmanStats', JSON.stringify(gameStats));
                initDashboard();
            }
        }

        // Function to record game result (called from hangman.html)
        function recordGameResult(word, difficulty, won, score) {
            const game = {
                word: word,
                difficulty: difficulty,
                won: won,
                score: score,
                date: new Date().toISOString()
            };

            gameStats.games.push(game);
            gameStats.totalGames++;
            gameStats.totalScore += score;

            if (won) {
                gameStats.totalWins++;
                gameStats.difficultyStats[difficulty].wins++;
            }

            gameStats.difficultyStats[difficulty].games++;
            gameStats.difficultyStats[difficulty].totalScore += score;

            if (score > gameStats.bestScore) {
                gameStats.bestScore = score;
                gameStats.bestScoreDate = game.date;
            }

            localStorage.setItem('hangmanStats', JSON.stringify(gameStats));
        }

        // Initialize dashboard on load
        initDashboard();

        // Handle window resize for chart
        window.addEventListener('resize', updatePerformanceChart);
    </script>
</body>
</html> 
